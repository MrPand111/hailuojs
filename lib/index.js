!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("hailuo",[],t):"object"==typeof exports?exports.hailuo=t():e.hailuo=t()}(self,(function(){return(()=>{var __webpack_modules__={664:e=>{e.exports={Dep:class{constructor(){this.subs=[]}add(){window.target&&(this.subs.push(window.target),window.target=null)}notify(){this.subs.forEach((e=>{e.update()}))}}}},853:e=>{e.exports={get:(e,t,o="")=>{const r=t.split(".");let n=e;for(;r.length;)try{n=n[`${r.shift()}`]}catch(e){return o}return n}}},173:e=>{e.exports={Watcher:class{constructor(e){this.cb=e}update(){this.cb()}}}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var o=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](o,o.exports,__webpack_require__),o.exports}var __webpack_exports__={};return(()=>{const{Dep}=__webpack_require__(664),{Watcher}=__webpack_require__(173),{get}=__webpack_require__(853),reactive=(e,t,o)=>{const r=new Dep;Object.defineProperty(e,t,{get:()=>(r.add(),o),set:n=>(e[t]!==n&&(o=n,e[t]=n,r.notify()),!0)})},observer=e=>{const t=Array.isArray(e)?[]:{};return Object.keys(e).forEach((o=>{"object"!=typeof e[o]||Array.isArray(e[o])?reactive(t,o,e[o]):t[o]=observer(e[o])})),t};class Hailuo{constructor(e){this.states={},this.mutations={},this.renderer=e}useReactive(e){this.states=observer(e)}register(e,t){this.mutations[e]=t}render(root){const compile=node=>{if(Object.keys(window.Hailuo).includes(node.tagName.toLowerCase())){const e=node.tagName.toLowerCase();node.parentNode.insertBefore(window.Hailuo[e],node),node.parentNode.removeChild(node)}if(node.getAttribute("h-if")){const e=node.style.display,t=()=>{const t=get(this.states,node.getAttribute("h-if"));node.style.display=t?e:"none"};window.target=new Watcher(t),window.target.update(),get(this.states,node.getAttribute("h-if"))}if(node.getAttribute("h-bind")){const type="INPUT"===node.tagName?"value":"innerText",renderData=()=>{const e=get(this.states,node.getAttribute("h-bind"));node[type]=e};window.target=new Watcher(renderData),window.target.update(),get(this.states,node.getAttribute("h-bind")),"INPUT"===node.tagName&&node.addEventListener("input",(e=>{eval(`this.states.${node.getAttribute("h-bind")} = '${e.target.value}'`)}))}if(node.getAttribute("h-for")){const e=()=>{const e=get(this.states,node.getAttribute("h-for")),t=node.children[0];node.innerHTML="",e.forEach(((e,o)=>{const r=t=>{if(t.getAttribute("h-bind")&&-1!==t.getAttribute("h-bind").indexOf("item")){const o=t.getAttribute("h-bind").split(".").length;t.innerText=1===o?e:get(e,t.getAttribute("h-bind").slice(5))}return t.children&&[...t.children].forEach((e=>{r(e)})),t},n=r(t.cloneNode(!0));node.appendChild(n)}))};return window.target=new Watcher(e),window.target.update(),void get(this.states,node.getAttribute("h-for"))}if(node.getAttribute("h-click")&&node.addEventListener("click",this.mutations[node.getAttribute("h-click")]),node.children)for(const e of node.children)compile(e);return node};compile(root)}}Hailuo.createApp=e=>new Hailuo(e),Hailuo.define=(e,t)=>{const o=document.createElement("div");o.id=e,o.innerHTML=t.renderer,t.render(o),window.Hailuo[e]=o},(e=>{e.Hailuo={},e.H=Hailuo})(window)})(),__webpack_exports__})()}));